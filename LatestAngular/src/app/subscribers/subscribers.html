<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Subscribers List</h2>
  <div class="mb-6 p-4 bg-gray-50 border rounded">
    <h3 class="font-semibold mb-2">RxJS Operators Demo (Check Console)</h3>
    <div class="flex flex-wrap gap-2">
      <button (click)="triggerSwitchMap()" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded text-sm">SwitchMap</button>
      <button (click)="triggerConcatMap()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">ConcatMap</button>
      <button (click)="triggerMergeMap()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm">MergeMap</button>
      <button (click)="triggerExhaustMap()" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm">ExhaustMap</button>
    </div>
  </div>
  <div class="mb-4">
    <input
      type="text"
      placeholder="Search by name or email..."
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      (input)="onSearch($event)"
    />
  </div>
  <div class="overflow-x-auto">
    <table class="table-auto md:table-fixed min-w-full bg-white border border-gray-200">
      <thead>
        <tr class="bg-gray-100 border-b">
          <th class="py-2 px-4 text-left">ID</th>
          <th class="py-2 px-4 text-left">Name</th>
          <th class="py-2 px-4 text-left">Email</th>
          <th class="py-2 px-4 text-left">Mobile</th>
          <th class="py-2 px-4 text-left">Status</th>
          <th class="py-2 px-4 text-left">Plan</th>
          <th class="py-2 px-4 text-left">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (user of paginatedSubscribers(); track user.id) {
        <tr class=" hover:bg-gray-50">
          <td class="py-2 px-4">{{ user.id }}</td>
          <td class="py-2 px-4">{{ user.firstname }} {{ user.lastname }}</td>
          <td class="py-2 px-4">{{ user.email }}</td>
          <td class="py-2 px-4">{{ user.mobile }}</td>
          <td class="py-2 px-4">{{ user.status }}</td>
          <td class="py-2 px-4">{{ user.plan }}</td>
          <td class="py-2 px-4 flex gap-2">
            <button (click)="onView(user)" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded text-sm">View</button>
            <button (click)="onEdit(user)" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded text-sm">Edit</button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="flex justify-between items-center mt-4">
    <button (click)="prevPage()" [disabled]="currentPage() === 1" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded disabled:opacity-50">
      Previous
    </button>
    <span class="text-gray-700">Page {{ currentPage() }} of {{ totalPages() }}</span>
    <button (click)="nextPage()" [disabled]="currentPage() === totalPages()" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded disabled:opacity-50">
      Next
    </button>
  </div>
</div>
